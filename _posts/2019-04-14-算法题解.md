---
categories: problem
layout: post
---

- Table
{:toc}
# 括号序列判定有效

问题：判断一个括号序列是否合法。

一个有效的括号序列要满足下面两条性质：

**左偏性：任何序列的前缀中左括号出现次数不少于右括号出现次数**

**右偏性：任何序列的后缀中右括号出现次数不少于左括号出现次数**

因此只需要从左往右扫描一次，并从右向左扫描一次。

如果序列中左括号出现次数和右括号出现次数相同，那么满足条件1就意味着满足条件2，而在从左往右扫描结束后可以得到序列中左括号和右括号出现次数的差，因此只需要扫描一次就行了。

**匹配性：序列中左括号出现次数和右括号出现次数相同**

# 带占位符的括号序列求解

问题：判断一个带?占位符的括号序列是否合法，其中?可以替换为左括号或右括号（多个问号可以有独立的取值），如果合法就求出一组可行的替换方案。

我们知道序列中左括号出现次数和右括号出现次数相同是括号序列有解的必要条件，因此我们可以估算出?最终会有多少被替换为左括号，多少被替换为右括号。

好了，我们现在给出另外一个命题：

**任意合法的括号序列中，如果一个右括号出现在左括号之前，那么我们可以交换这两个括号的位置，序列依旧有效。**

这个命题比较简单，因为交换不会影响到序列的左偏性和匹配性，因此交换后的括号也是有效的。

那么我们可以利用这个命题解决我们的问题。如果有一组可行方案，它会导出一个有效的括号序列，如果存在i,j，其中i<j且i下标的?替换为右括号且j下标的?替换为左括号，那么我们就交换二者位置，不断重复上面这个过程，最终会得到另外一个有效序列，其中前几个问号被替换为了左括号，而后面的问号都被替换为右括号。

考虑到我们之前已经得到有多少问号会被分别替换为左括号和右括号，分别数量记为n，m，我们只需要将前n个问号替换为左括号，后m个问号替换为右括号，之后验证序列是否有效。如果有效就找到了一组解，如果无效，就不存在可行的替换方案。

# 利用前视图，左视图和上视图还原积木

问题：在一个n\*n表格中堆积积木，分别给出前视图front，左视图left和上视图top，要求还原积木。

我们可以在每个点尽可能多放积木，只要不违反三个视图的约束即可，即(i,j)可以放置min(front[i],left[j])*top\[i\]\[j\]个积木。

# 矩阵四角逆判同

问题：给出两个n\*m矩阵A，B，矩阵中仅包含0与1，每次选出两个不同的x1,x2和不同的y1,y2，将A\[x1\]\[y1\],A\[x1\]\[y2\],A\[x2\]\[y1\],A\[x2\]\[y2\]取逆，问是否可以通过多次该流程将A转换为B。

我们可以发现每次转换后第x1、x2行，第y1、y2列中1出现次数的奇偶性都不会发生改变。因此我们可以对于任何等于1的A\[x\]\[y\]，其中x<n，y<m，选择x1=x,y1=y,x2=n,y2=m。这样就会将A\[x\]\[y\]置为0。重复上面过程直到不能重复，这时候A的第n行和第m列保存的就是A每列每行的奇偶信息。同样处理B，之后判断A与B是否相同即可。

这里需要说明两点，可以互相转换的矩阵经过处理后一定是相同的。并且由于重复取逆两次可以撤销操作，因此操作存在逆操作，我们对A处理后，按照对B处理的逆序将操作应用到A上，这样就可以将A转换为B。

# 最大权线性基

问题：要求创建一个线性基，每个基都有对应的权重，要求得到的结果权和最大。

很容易想到贪心的方法，将可能的基按权值从大到小加入到线性基中。下面证明正确性。

贪心算法的证明方法一般是证明第一个选择的必定是结果的部分，之后剩下可选择的就变少了，循环证明下去即可。

这里我们证明假设存在一组线性基B，设x为最大权非0基，很显然x一定是结果的一部分，否则我们可以用x替换B中某个基得到更好的结果。之后将所有剩余数与x做亦或和，接下来的问题就变成了除x外的可能基中选取最大权线性基，之后加上x即可。

