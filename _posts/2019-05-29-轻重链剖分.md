---
categories: algorithm
layout: post
---

- Table
{:toc}
# BZOJ4043

题目要求我们能判断路径的总权值，以及动态更新单点权值和子树权值。

如果只有单点权值，可以使用LCT来维护整颗树，复杂度为$O(nlog2_^2n)$。但是这里有子树权值，所以还是需要使用树链剖分的。

这题实际上考察的是树链剖分的一个特性，我们为每个结点重新分配序号时，同一条重链上的所有结点的序号是连续的，同时一颗子树下的所有结点的序号恰好形成一个连续的区间。

因此我们只需要寻找轻重链，之后为每个结点分配序号，按照序号创建一个线段树。之后的所有操作都在线段树上完成，实际的时间复杂度为$O(nlog_2^2n)$。

# BZOJ4196

将软件表示为结点，软件安装对应结点权值为1，未安装对应权值为0。题目实际上要我们求的是计算子树的总权值和，计算路径权值和，设置路径权值，设置子树权值。之后问题同BZOJ4043。

