---
categories: algorithm
layout: post
---

- Table
{:toc}

# 切比雪夫距离

对于二维平面上两个点(a,b),(c,d)，它们的切比雪夫距离定义为


$$
\max(|a-c|,|b-d|)
$$


由于切比雪夫距离不容易被预处理，有时候需要先转换为曼哈顿距离进行处理。下面给出转换的数学公式：


$$
|a-c|+|b-d|=\max(|(a+b)-(c+d)|,|(a-b)-(c-d)|)
$$


证明方式比较简单，首先将右边公式转换为：


$$
\max(|(a-c)+(b-d)|,|(a-c)-(b-d)|)
$$


考虑两种情况，第一种$a-c$与$b-d$同号。那么右边的公式取值为$|(a-c)+(b-d)|=|a-c|+|b-d|$。而第二种情况下，$a-c$与$b-d$异号。那么右边的公式取值为$|(a-c)-(b-d)|=|a-c|+|-(b-d)|=|a-c|+|b-d|$。因此证明了等式的成立。



利用这个公式我们可以先将所有平面上的点$(x,y)$转换为$(x+y,x-y)$的形式，之后计算各个点间的切比雪夫距离就可以得到原平面的曼哈顿距离。同理，如果我们将平面上的点$(x,y)$转换为$(\frac{x+y}{2}, \frac{x-y}{2}})$，之后计算各个点之间的曼哈顿距离，那么就可以得到原平面的切比雪夫距离。

# BZOJ3170

**题意**

[https://www.lydsy.com/JudgeOnline/problem.php?id=3170](https://www.lydsy.com/JudgeOnline/problem.php?id=3170)

**题解**

距离是切比雪夫距离，非常难算。但是如果距离是曼哈顿距离的话，似乎就非常简单了。我们可以先将切比雪夫距离转换为曼哈顿距离（如何转换见切比雪夫距离这一段）。之后假设我们选择$(x_0,y_0)$作为集合点，那么总路程为：


$$
\sum_{i=1}^n(|x_i-x_0|+|y_i-y_0|)=\sum_{i=1}^n|x_i-x_0|+\sum_{i=1}^n|y_i-y_0|
$$


可以发现x和y坐标可以分开计算，而计算单一维度非常简单，这里不赘述。