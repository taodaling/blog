---
categories: algorithm
layout: post
---

- Table
{:toc}
# LUOGU4308

**题意**

[https://www.luogu.org/problem/P4308](https://www.luogu.org/problem/P4308)

**题解**

一开始以为是在图上跑DP，但是算了一下精度，至少需要跑一千万轮BFS才能保证精度，这肯定要超时。

题目很好地使用了倍增思想。简单计算可以知道在$10^9$后继续移动带来的收益已经不足以影响后面的精度。我们记$f(i,x,y)$表示从x点到y点，共经过$2^i$次移动可以得到的收益。那么可以推出下面公式：


$$
f(i,x,y)=\max_z f(i-1,x,z)+p^{2^{i-2}}f(i-1,x,z)
$$


我们i枚举到30就够了。