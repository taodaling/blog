---
categories: maven
layout: post
---

{:toc}



# Maven

## modules

modules用于定义模块，一个项目可以切分为多个子模块。每个子模块都有自己的pom文件。

```xml
<project>
	<modules>
		<module>api</module>
		<module>service</module>
		<module>dao</module>
	</modules>
</project>
```

利用mvn构建项目时，会同时构建其所有子模块。

## parent

一个pom可以设置另外一个pom为父pom，这样子pom会继承父pom的所有内容。

```xml
<project> 
	<parent>
		<groupId>com.daltao</groupId>
		<artifactId>everything-parent</artifactId>
		<version>1.0-SNAPSHOT</version>
	</parent>
</project>
```

## dependencyManagement

由于在父pom中定义依赖，会导致子pom必定拥有该依赖。为了消除不必要的依赖但是同时拥有继承的好处（比如关联依赖的版本一致），maven中提供了dependancyManagement元素。只有在显示地增加dependence时，才会利用到dependancyManagement中声明的值作为默认值。

```xml
<project>
	<dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>${gson.version}</version>
            </dependency>
            <dependency>
                <groupId>org.junit.jupiter</groupId>
                <artifactId>junit-jupiter-api</artifactId>
                <version>${junit.version}</version>
                <scope>test</scope>
            </dependency>
        </dependencies>
	</dependencyManagement>
</project>
```

### import

dependancyManagement中的依赖的scope可以设置为import，表示继承该pom中的dependancyManagement内容。

```xml
<project>
	<dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>${gson.version}</version>
				<type>pom</type>
				<scope>import</scope>
            </dependency>
        </dependencies>
	</dependencyManagement>
</project>
```



## scope

scope用于指定依赖的作用范围，类似于Java中注解的Retention。其可选值如下：

- compile: 默认，表示依赖将会在编译、运行时使用。
- provided: 表示依赖仅用于编译时。
- runtime: 表示依赖仅用于运行时（通过反射使用）
- test: 表示依赖仅用于测试用例的编译和运行

## properties

properties元素允许用户定义多个属性，而在其他地方可以利用`${propertyName}`来引用。

```xml
<project>
	<properties>
    	<gson.version>2.8.5</gson.version>
    </properties>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.google.code.gson</groupId>
                <artifactId>gson</artifactId>
                <version>${gson.version}</version>
            </dependency>
        </dependencies>
    </dependencyManagement>
</project>
```

## build

### filters

filters标签中可以指定filter，filter则指定一个文件，文件为包含属性值的properties文件，相当于从中导入properties。

```xml
<project>
	<build>
        <filters>
          <filter>src/main/filters/${filter-file}.properties</filter>
        </filters>
    </build>
</project>
```

