---
categories: technology
layout: post
---

- Table
{:toc}

# 内存分区

JVM内存分区分为：

- 程序计数器：存储当前线程执行的字节码地址，每个线程私有，用于实现跳转等。  如果执行的是Native方法，计数器则为空。
- 虚拟机栈：每个方法执行时，都会创建一个栈帧，栈帧中存储了局部变量表，操作数栈，动态连接，方法出口等信息。局部变量表中一个double，long类型对象占两个slot，其余类型占一个slot。如果线程请求的栈深度大于虚拟机允许的深度，会抛出StackOverflowError，如果栈申请不到足够的内存，则会抛出OutOfMemoryError。
- 本地方法栈：与虚拟机栈类似，只不过是为本地方法服务的。由于Java虚拟机规范没有对其进行严格规定，所以很多虚拟机直接将本地方法栈和虚拟机栈合二为一。
- Java堆：虚拟机所管理的内存最大的一块。Java堆是线程共享的一块内存区域，此区域的唯一用处就是存放对象实例，Java中几乎所有的对象都是在这里分配内存的。如果堆无法完成实例的分配且无法进一步无法扩展，则会抛出OutOfMemoryError。
- 方法区：类似于Java堆，是各个线程共享的一块内存区域，用于存储已经被虚拟机加载的类型信息、常量、静态变量、即时编译器编译后的代码缓存等数据。